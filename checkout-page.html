<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Checkout | eStore</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/png">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/LineIcons.css">
    <link rel="stylesheet" href="assets/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/css/jquery-ui.min.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/default.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <link rel="stylesheet" href="assets/css/checkout-page.css">

</head>
<body>

    <div class="preloader">
        <div class="loader">
            <div class="ytp-spinner">
                <div class="ytp-spinner-container">
                    <div class="ytp-spinner-rotator">
                        <div class="ytp-spinner-left">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                        <div class="ytp-spinner-right">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="navbar-placeholder"></div>

    <section class="breadcrumbs-wrapper pt-50 pb-50 bg-primary-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs-style breadcrumbs-style-1 d-md-flex justify-content-between align-items-center">
                        <div class="breadcrumb-left">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Checkout</li>
                            </ol>
                        </div>
                        <div class="breadcrumb-right">
                            <h5 class="heading-5 font-weight-500">Checkout</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="checkout-page-wrapper pt-70 pb-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="checkout-steps-form-style-1">
                        <div id="checkout-accordion-steps">

                            <div data-vj-title="Your Personal Details">
                                <div class="checkout-form-style-1">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>User Name</label>
                                                <input type="text" placeholder="User Name">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>First Name</label>
                                                <input type="text" placeholder="First Name">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Last Name</label>
                                                <input type="text" placeholder="Last Name">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Email Address</label>
                                                <input type="email" placeholder="Email Address">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Phone Number</label>
                                                <input type="text" placeholder="Phone Number">
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Mailing Address</label>
                                                <input type="text" placeholder="Mailing Address">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>City</label>
                                                <input type="text" placeholder="City">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Post Code</label>
                                                <input type="text" placeholder="Post Code">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Country</label>
                                                <input type="text" placeholder="Country">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Region/State</label>
                                                <select>
                                                    <option value="" selected disabled>select</option>
                                                    <option value="1">State 1</option>
                                                    <option value="2">State 2</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="" id="shippingSame">
                                                <label class="form-check-label" for="shippingSame">
                                                    My delivery and mailing addresses are the same.
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-12 text-end pt-3">
                                            <button class="main-btn primary-btn" data-vj-step-to="next">NEXT STEP</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div data-vj-title="Shipping Address">
                                <div class="checkout-form-style-1">
                                    <p>Your shipping address details go here (if different from mailing address)...</p>
                                    <div class="col-12 text-end pt-3">
                                        <button class="main-btn primary-btn" data-vj-step-to="next">NEXT STEP</button>
                                    </div>
                                </div>
                            </div>

                            <div data-vj-title="Payment Info">
                                <div class="checkout-form-style-1">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Cardholder Name</label>
                                                <input type="text" placeholder="Cardholder Name">
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Card Number</label>
                                                <input type="text" id="cardNumber" placeholder="0000 0000 0000 0000">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Expiration</label>
                                                <div class="d-flex">
                                                    <input type="text" id="expMonth" placeholder="MM" style="margin-right: 10px;">
                                                    <input type="text" id="expYear" placeholder="YYYY">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>CVC/CVV</label>
                                                <input type="text" id="cvc" placeholder="***">
                                            </div>
                                        </div>
                                        <div class="col-12 text-start pt-3">
                                            <button class="main-btn primary-btn">PAY NOW</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="checkout-coupon-wrapper mt-4 mt-lg-0">
                         <p>Apply Coupon to get discount!</p>
                         <div class="single-form form-default">
                             <div class="form-input">
                                 <input type="text" placeholder="Coupon Code">
                                 <button class="main-btn primary-btn">APPLY</button>
                             </div>
                         </div>
                    </div>

                    <div class="checkout-products-wrapper mt-4">
                        <div class="accordion" id="productsAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingProducts">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseProducts" aria-expanded="true" aria-controls="collapseProducts">
                                        Selected Products (4)
                                    </button>
                                </h2>
                                <div id="collapseProducts" class="accordion-collapse collapse show" aria-labelledby="headingProducts">
                                    <div class="accordion-body">
                                        <ul class="checkout-products-list">
                                            <li class="single-product-item">
                                                <div class="product-thumb"> <img src="assets/images/product-cart/product-1.png" alt="Product"> </div>
                                                <div class="product-content">
                                                    <h6 class="title"><a href="product-details-page.html">Hollow Port</a></h6>
                                                    <p>Brown, XL, 1 x 36.00</p>
                                                </div>
                                                <div class="product-price"> <p class="price">$36.00</p> </div>
                                            </li>
                                            <li class="single-product-item">
                                                <div class="product-thumb"> <img src="assets/images/product-cart/product-2.png" alt="Product"> </div>
                                                <div class="product-content">
                                                    <h6 class="title"><a href="product-details-page.html">Mist Black Triblend</a></h6>
                                                    <p>Brown, XL, 1 x 36.00</p>
                                                </div>
                                                <div class="product-price"> <p class="price">$36.00</p> </div>
                                            </li>
                                            <li class="single-product-item">
                                                <div class="product-thumb"> <img src="assets/images/product-cart/product-3.png" alt="Product"> </div>
                                                <div class="product-content">
                                                    <h6 class="title"><a href="product-details-page.html">Realm Bone</a></h6>
                                                    <p>Brown, XL, 1 x 36.00</p>
                                                </div>
                                                <div class="product-price"> <p class="price">$36.00</p> </div>
                                            </li>
                                            <li class="single-product-item">
                                                <div class="product-thumb"> <img src="assets/images/product-cart/product-4.png" alt="Product"> </div>
                                                <div class="product-content">
                                                    <h6 class="title"><a href="product-details-page.html">Circular Sienna</a></h6>
                                                    <p>Brown, XL, 1 x 36.00</p>
                                                </div>
                                                <div class="product-price"> <p class="price">$36.00</p> </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkout-summary-wrapper mt-4">
                        <h5 class="heading-5 text-center">Pricing Table</h5>
                        <ul class="cart-summary-list">
                            <li> <span>Subtotal Price:</span> <span>$144.00</span> </li>
                            <li> <span>Shipping Cost (+):</span> <span class="text-success">$10.50</span> </li>
                            <li> <span>Discount (-):</span> <span class="text-danger">$10.50</span> </li>
                            <li class="total"> <span>Total Payable:</span> <span>$164.50</span> </li>
                        </ul>
                        <div class="checkout-btn text-center pt-20">
                            <a href="cart-page.html" class="main-btn primary-btn-border">EDIT SHOPPING CART</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
    <div id="footer-placeholder"></div>

    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
    <script src="assets/js/vendor/modernizr-3.7.1.min.js"></script>
    <script src="assets/js/slick.min.js"></script>
    <script src="assets/js/jquery-vj-accordion-steps.js"></script> <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/jquery.form-validator.min.js"></script>
    <script src="assets/js/jquery.nice-select.min.js"></script>
    <script src="assets/js/jquery.formatter.min.js"></script> <script src="assets/js/count-up.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            
            // --- 1. تشغيل سكريبتات الصفحة (اللي مش معتمدة على الناف بار) ---
            try {
                // a) تشغيل الأكورديون بتاع الخطوات
                if ($.fn.vjAccordionSteps) {
                    $("#checkout-accordion-steps").vjAccordionSteps({
                        force_nav: false,
                        auto_slider: false,
                        nav_buttons: false,
                    });
                } else {
                    console.warn('vjAccordionSteps plugin not found.');
                }
                
                // b) تشغيل Nice Select على الفورم بتاع الصفحة
                if ($.fn.niceSelect) {
                    $('.checkout-steps-form-style-1').find('select').niceSelect();
                }

                // c) تشغيل فورمات أرقام الكروت
                if ($.fn.formatter) {
                    $('#cardNumber').formatter({'pattern': '{{9999}} {{9999}} {{9999}} {{9999}}'});
                    $('#expMonth').formatter({'pattern': '{{99}}'});
                    $('#expYear').formatter({'pattern': '{{9999}}'});
                    $('#cvc').formatter({'pattern': '{{999}}'});
                } else {
                    console.warn('formatter plugin not found.');
                }
                console.log('Page-specific scripts (accordion, selects) initialized.');
            } catch (e) {
                console.error("Error initializing page scripts: ", e);
            }

            // --- 2. تحميل الناف بار ---
            const navbarPlaceholder = document.getElementById("navbar-placeholder");
            if (navbarPlaceholder) {
                fetch('_navbar.html')
                    .then(response => {
                        if (!response.ok) { throw new Error('Network response was not ok for navbar'); }
                        return response.text();
                    })
                    .then(data => {
                        navbarPlaceholder.innerHTML = data;
                        
                        // *** تشغيل سكريبتات الناف بار (بعد ما يحمل) ***
                        // a) Nice Select للناف بار
                        if ($.fn.niceSelect) {
                            $(navbarPlaceholder).find('select').niceSelect('destroy').niceSelect();
                        }
                        // b) قائمة الموبايل
                        const menuOpen = navbarPlaceholder.querySelector('.mobile-menu-open-7');
                        const menuClose = navbarPlaceholder.querySelector('.close-mobile-menu-7');
                        const overlay = navbarPlaceholder.querySelector('.overlay-7');
                        const sidebar = navbarPlaceholder.querySelector('.navbar-sidebar-7');
                        if (menuOpen && menuClose && overlay && sidebar) {
                             menuOpen.onclick = function(e) { e.preventDefault(); sidebar.classList.add('open'); overlay.classList.add('open'); };
                             menuClose.onclick = function(e) { e.preventDefault(); sidebar.classList.remove('open'); overlay.classList.remove('open'); };
                             overlay.onclick = function(e) { e.preventDefault(); sidebar.classList.remove('open'); overlay.classList.remove('open'); };
                        }
                        console.log('Navbar loaded and re-initialized.');
                    })
                    .catch(error => console.error('Error loading navbar:', error));
            }

            // --- 3. تحميل الفوتر ---
            const footerPlaceholder = document.getElementById("footer-placeholder");
            if (footerPlaceholder) {
                fetch('_footer.html')
                    .then(response => {
                        if (!response.ok) { throw new Error('Network response was not ok for footer'); }
                        return response.text();
                    })
                    .then(data => { footerPlaceholder.innerHTML = data; })
                    .catch(error => console.error('Error loading footer:', error));
            }
            
        }); // End of DOMContentLoaded
    </script>

</body>
</html>